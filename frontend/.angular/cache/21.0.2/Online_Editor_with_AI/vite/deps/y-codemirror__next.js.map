{
  "version": 3,
  "sources": ["../../../../../../node_modules/y-codemirror.next/src/y-range.js", "../../../../../../node_modules/y-codemirror.next/src/y-sync.js", "../../../../../../node_modules/y-codemirror.next/src/y-remote-selections.js", "../../../../../../node_modules/lib0/mutex.js", "../../../../../../node_modules/y-codemirror.next/src/y-undomanager.js", "../../../../../../node_modules/y-codemirror.next/src/index.js"],
  "sourcesContent": ["import * as Y from 'yjs'\n\n/**\n * Defines a range on text using relative positions that can be transformed back to\n * absolute positions. (https://docs.yjs.dev/api/relative-positions)\n */\nexport class YRange {\n  /**\n   * @param {Y.RelativePosition} yanchor\n   * @param {Y.RelativePosition} yhead\n   */\n  constructor (yanchor, yhead) {\n    this.yanchor = yanchor\n    this.yhead = yhead\n  }\n\n  /**\n   * @returns {any}\n   */\n  toJSON () {\n    return {\n      yanchor: Y.relativePositionToJSON(this.yanchor),\n      yhead: Y.relativePositionToJSON(this.yhead)\n    }\n  }\n\n  /**\n   * @param {any} json\n   * @return {YRange}\n   */\n  static fromJSON (json) {\n    return new YRange(Y.createRelativePositionFromJSON(json.yanchor), Y.createRelativePositionFromJSON(json.yhead))\n  }\n}\n", "\nimport * as Y from 'yjs'\nimport * as cmState from '@codemirror/state' // eslint-disable-line\nimport * as cmView from '@codemirror/view' // eslint-disable-line\nimport { YRange } from './y-range.js'\n\nexport class YSyncConfig {\n  constructor (ytext, awareness) {\n    this.ytext = ytext\n    this.awareness = awareness\n    this.undoManager = new Y.UndoManager(ytext)\n  }\n\n  /**\n   * Helper function to transform an absolute index position to a Yjs-based relative position\n   * (https://docs.yjs.dev/api/relative-positions).\n   *\n   * A relative position can be transformed back to an absolute position even after the document has changed. The position is\n   * automatically adapted. This does not require any position transformations. Relative positions are computed based on\n   * the internal Yjs document model. Peers that share content through Yjs are guaranteed that their positions will always\n   * synced up when using relatve positions.\n   *\n   * ```js\n   * import { ySyncFacet } from 'y-codemirror'\n   *\n   * ..\n   * const ysync = view.state.facet(ySyncFacet)\n   * // transform an absolute index position to a ypos\n   * const ypos = ysync.getYPos(3)\n   * // transform the ypos back to an absolute position\n   * ysync.fromYPos(ypos) // => 3\n   * ```\n   *\n   * It cannot be guaranteed that absolute index positions can be synced up between peers.\n   * This might lead to undesired behavior when implementing features that require that all peers see the\n   * same marked range (e.g. a comment plugin).\n   *\n   * @param {number} pos\n   * @param {number} [assoc]\n   */\n  toYPos (pos, assoc = 0) {\n    return Y.createRelativePositionFromTypeIndex(this.ytext, pos, assoc)\n  }\n\n  /**\n   * @param {Y.RelativePosition | Object} rpos\n   */\n  fromYPos (rpos) {\n    const pos = Y.createAbsolutePositionFromRelativePosition(Y.createRelativePositionFromJSON(rpos), this.ytext.doc)\n    if (pos == null || pos.type !== this.ytext) {\n      throw new Error('[y-codemirror] The position you want to retrieve was created by a different document')\n    }\n    return {\n      pos: pos.index,\n      assoc: pos.assoc\n    }\n  }\n\n  /**\n   * @param {cmState.SelectionRange} range\n   * @return {YRange}\n   */\n  toYRange (range) {\n    const assoc = range.assoc\n    const yanchor = this.toYPos(range.anchor, assoc)\n    const yhead = this.toYPos(range.head, assoc)\n    return new YRange(yanchor, yhead)\n  }\n\n  /**\n   * @param {YRange} yrange\n   */\n  fromYRange (yrange) {\n    const anchor = this.fromYPos(yrange.yanchor)\n    const head = this.fromYPos(yrange.yhead)\n    if (anchor.pos === head.pos) {\n      return cmState.EditorSelection.cursor(head.pos, head.assoc)\n    }\n    return cmState.EditorSelection.range(anchor.pos, head.pos)\n  }\n}\n\n/**\n * @type {cmState.Facet<YSyncConfig, YSyncConfig>}\n */\nexport const ySyncFacet = cmState.Facet.define({\n  combine (inputs) {\n    return inputs[inputs.length - 1]\n  }\n})\n\n/**\n * @type {cmState.AnnotationType<YSyncConfig>}\n */\nexport const ySyncAnnotation = cmState.Annotation.define()\n\n/**\n * @extends {PluginValue}\n */\nclass YSyncPluginValue {\n  /**\n   * @param {cmView.EditorView} view\n   */\n  constructor (view) {\n    this.view = view\n    this.conf = view.state.facet(ySyncFacet)\n    this._observer = (event, tr) => {\n      if (tr.origin !== this.conf) {\n        const delta = event.delta\n        const changes = []\n        let pos = 0\n        for (let i = 0; i < delta.length; i++) {\n          const d = delta[i]\n          if (d.insert != null) {\n            changes.push({ from: pos, to: pos, insert: d.insert })\n          } else if (d.delete != null) {\n            changes.push({ from: pos, to: pos + d.delete, insert: '' })\n            pos += d.delete\n          } else {\n            pos += d.retain\n          }\n        }\n        view.dispatch({ changes, annotations: [ySyncAnnotation.of(this.conf)] })\n      }\n    }\n    this._ytext = this.conf.ytext\n    this._ytext.observe(this._observer)\n  }\n\n  /**\n   * @param {cmView.ViewUpdate} update\n   */\n  update (update) {\n    if (!update.docChanged || (update.transactions.length > 0 && update.transactions[0].annotation(ySyncAnnotation) === this.conf)) {\n      return\n    }\n    const ytext = this.conf.ytext\n    ytext.doc.transact(() => {\n      /**\n       * This variable adjusts the fromA position to the current position in the Y.Text type.\n       */\n      let adj = 0\n      update.changes.iterChanges((fromA, toA, fromB, toB, insert) => {\n        const insertText = insert.sliceString(0, insert.length, '\\n')\n        if (fromA !== toA) {\n          ytext.delete(fromA + adj, toA - fromA)\n        }\n        if (insertText.length > 0) {\n          ytext.insert(fromA + adj, insertText)\n        }\n        adj += insertText.length - (toA - fromA)\n      })\n    }, this.conf)\n  }\n\n  destroy () {\n    this._ytext.unobserve(this._observer)\n  }\n}\n\nexport const ySync = cmView.ViewPlugin.fromClass(YSyncPluginValue)\n", "\nimport * as cmView from '@codemirror/view'\n\nimport * as cmState from '@codemirror/state'\nimport * as dom from 'lib0/dom'\nimport * as pair from 'lib0/pair'\nimport * as math from 'lib0/math'\n\nimport * as Y from 'yjs'\nimport { ySyncFacet } from './y-sync.js'\n\nexport const yRemoteSelectionsTheme = cmView.EditorView.baseTheme({\n  '.cm-ySelection': {\n  },\n  '.cm-yLineSelection': {\n    padding: 0,\n    margin: '0px 2px 0px 4px'\n  },\n  '.cm-ySelectionCaret': {\n    position: 'relative',\n    borderLeft: '1px solid black',\n    borderRight: '1px solid black',\n    marginLeft: '-1px',\n    marginRight: '-1px',\n    boxSizing: 'border-box',\n    display: 'inline'\n  },\n  '.cm-ySelectionCaretDot': {\n    borderRadius: '50%',\n    position: 'absolute',\n    width: '.4em',\n    height: '.4em',\n    top: '-.2em',\n    left: '-.2em',\n    backgroundColor: 'inherit',\n    transition: 'transform .3s ease-in-out',\n    boxSizing: 'border-box'\n  },\n  '.cm-ySelectionCaret:hover > .cm-ySelectionCaretDot': {\n    transformOrigin: 'bottom center',\n    transform: 'scale(0)'\n  },\n  '.cm-ySelectionInfo': {\n    position: 'absolute',\n    top: '-1.05em',\n    left: '-1px',\n    fontSize: '.75em',\n    fontFamily: 'serif',\n    fontStyle: 'normal',\n    fontWeight: 'normal',\n    lineHeight: 'normal',\n    userSelect: 'none',\n    color: 'white',\n    paddingLeft: '2px',\n    paddingRight: '2px',\n    zIndex: 101,\n    transition: 'opacity .3s ease-in-out',\n    backgroundColor: 'inherit',\n    // these should be separate\n    opacity: 0,\n    transitionDelay: '0s',\n    whiteSpace: 'nowrap'\n  },\n  '.cm-ySelectionCaret:hover > .cm-ySelectionInfo': {\n    opacity: 1,\n    transitionDelay: '0s'\n  }\n})\n\n/**\n * @todo specify the users that actually changed. Currently, we recalculate positions for every user.\n * @type {cmState.AnnotationType<Array<number>>}\n */\nconst yRemoteSelectionsAnnotation = cmState.Annotation.define()\n\nclass YRemoteCaretWidget extends cmView.WidgetType {\n  /**\n   * @param {string} color\n   * @param {string} name\n   */\n  constructor (color, name) {\n    super()\n    this.color = color\n    this.name = name\n  }\n\n  toDOM () {\n    return /** @type {HTMLElement} */ (dom.element('span', [pair.create('class', 'cm-ySelectionCaret'), pair.create('style', `background-color: ${this.color}; border-color: ${this.color}`)], [\n      dom.text('\\u2060'),\n      dom.element('div', [\n        pair.create('class', 'cm-ySelectionCaretDot')\n      ]),\n      dom.text('\\u2060'),\n      dom.element('div', [\n        pair.create('class', 'cm-ySelectionInfo')\n      ], [\n        dom.text(this.name)\n      ]),\n      dom.text('\\u2060')\n    ]))\n  }\n\n  eq (widget) {\n    return widget.color === this.color\n  }\n\n  compare (widget) {\n    return widget.color === this.color\n  }\n\n  updateDOM () {\n    return false\n  }\n\n  get estimatedHeight () { return -1 }\n\n  ignoreEvent () {\n    return true\n  }\n}\n\nexport class YRemoteSelectionsPluginValue {\n  /**\n   * @param {cmView.EditorView} view\n   */\n  constructor (view) {\n    this.conf = view.state.facet(ySyncFacet)\n    this._listener = ({ added, updated, removed }, s, t) => {\n      const clients = added.concat(updated).concat(removed)\n      if (clients.findIndex(id => id !== this.conf.awareness.doc.clientID) >= 0) {\n        view.dispatch({ annotations: [yRemoteSelectionsAnnotation.of([])] })\n      }\n    }\n    this._awareness = this.conf.awareness\n    this._awareness.on('change', this._listener)\n    /**\n     * @type {cmView.DecorationSet}\n     */\n    this.decorations = cmState.RangeSet.of([])\n  }\n\n  destroy () {\n    this._awareness.off('change', this._listener)\n  }\n\n  /**\n   * @param {cmView.ViewUpdate} update\n   */\n  update (update) {\n    const ytext = this.conf.ytext\n    const ydoc = /** @type {Y.Doc} */ (ytext.doc)\n    const awareness = this.conf.awareness\n    /**\n     * @type {Array<cmState.Range<cmView.Decoration>>}\n     */\n    const decorations = []\n    const localAwarenessState = this.conf.awareness.getLocalState()\n\n    // set local awareness state (update cursors)\n    if (localAwarenessState != null) {\n      const hasFocus = update.view.hasFocus && update.view.dom.ownerDocument.hasFocus()\n      const sel = hasFocus ? update.state.selection.main : null\n      const currentAnchor = localAwarenessState.cursor == null ? null : Y.createRelativePositionFromJSON(localAwarenessState.cursor.anchor)\n      const currentHead = localAwarenessState.cursor == null ? null : Y.createRelativePositionFromJSON(localAwarenessState.cursor.head)\n\n      if (sel != null) {\n        const anchor = Y.createRelativePositionFromTypeIndex(ytext, sel.anchor)\n        const head = Y.createRelativePositionFromTypeIndex(ytext, sel.head)\n        if (localAwarenessState.cursor == null || !Y.compareRelativePositions(currentAnchor, anchor) || !Y.compareRelativePositions(currentHead, head)) {\n          awareness.setLocalStateField('cursor', {\n            anchor,\n            head\n          })\n        }\n      } else if (localAwarenessState.cursor != null && hasFocus) {\n        awareness.setLocalStateField('cursor', null)\n      }\n    }\n\n    // update decorations (remote selections)\n    awareness.getStates().forEach((state, clientid) => {\n      if (clientid === awareness.doc.clientID) {\n        return\n      }\n      const cursor = state.cursor\n      if (cursor == null || cursor.anchor == null || cursor.head == null) {\n        return\n      }\n      const anchor = Y.createAbsolutePositionFromRelativePosition(cursor.anchor, ydoc)\n      const head = Y.createAbsolutePositionFromRelativePosition(cursor.head, ydoc)\n      if (anchor == null || head == null || anchor.type !== ytext || head.type !== ytext) {\n        return\n      }\n      const { color = '#30bced', name = 'Anonymous' } = state.user || {}\n      const colorLight = (state.user && state.user.colorLight) || color + '33'\n      const start = math.min(anchor.index, head.index)\n      const end = math.max(anchor.index, head.index)\n      const startLine = update.view.state.doc.lineAt(start)\n      const endLine = update.view.state.doc.lineAt(end)\n      if (startLine.number === endLine.number) {\n        // selected content in a single line.\n        decorations.push({\n          from: start,\n          to: end,\n          value: cmView.Decoration.mark({\n            attributes: { style: `background-color: ${colorLight}` },\n            class: 'cm-ySelection'\n          })\n        })\n      } else {\n        // selected content in multiple lines\n        // first, render text-selection in the first line\n        decorations.push({\n          from: start,\n          to: startLine.from + startLine.length,\n          value: cmView.Decoration.mark({\n            attributes: { style: `background-color: ${colorLight}` },\n            class: 'cm-ySelection'\n          })\n        })\n        // render text-selection in the last line\n        decorations.push({\n          from: endLine.from,\n          to: end,\n          value: cmView.Decoration.mark({\n            attributes: { style: `background-color: ${colorLight}` },\n            class: 'cm-ySelection'\n          })\n        })\n        for (let i = startLine.number + 1; i < endLine.number; i++) {\n          const linePos = update.view.state.doc.line(i).from\n          decorations.push({\n            from: linePos,\n            to: linePos,\n            value: cmView.Decoration.line({\n              attributes: { style: `background-color: ${colorLight}`, class: 'cm-yLineSelection' }\n            })\n          })\n        }\n      }\n      decorations.push({\n        from: head.index,\n        to: head.index,\n        value: cmView.Decoration.widget({\n          side: head.index - anchor.index > 0 ? -1 : 1, // the local cursor should be rendered outside the remote selection\n          block: false,\n          widget: new YRemoteCaretWidget(color, name)\n        })\n      })\n    })\n    this.decorations = cmView.Decoration.set(decorations, true)\n  }\n}\n\nexport const yRemoteSelections = cmView.ViewPlugin.fromClass(YRemoteSelectionsPluginValue, {\n  decorations: v => v.decorations\n})\n", "/**\n * Mutual exclude for JavaScript.\n *\n * @module mutex\n */\n\n/**\n * @callback mutex\n * @param {function():void} cb Only executed when this mutex is not in the current stack\n * @param {function():void} [elseCb] Executed when this mutex is in the current stack\n */\n\n/**\n * Creates a mutual exclude function with the following property:\n *\n * ```js\n * const mutex = createMutex()\n * mutex(() => {\n *   // This function is immediately executed\n *   mutex(() => {\n *     // This function is not executed, as the mutex is already active.\n *   })\n * })\n * ```\n *\n * @return {mutex} A mutual exclude function\n * @public\n */\nexport const createMutex = () => {\n  let token = true\n  return (f, g) => {\n    if (token) {\n      token = false\n      try {\n        f()\n      } finally {\n        token = true\n      }\n    } else if (g !== undefined) {\n      g()\n    }\n  }\n}\n", "import * as Y from 'yjs' // eslint-disable-line\nimport * as cmState from '@codemirror/state'\n\nimport * as cmView from '@codemirror/view'\nimport { ySyncFacet, ySyncAnnotation } from './y-sync.js'\nimport { YRange } from './y-range.js' // eslint-disable-line\nimport { createMutex } from 'lib0/mutex'\n\nexport class YUndoManagerConfig {\n  /**\n   * @param {Y.UndoManager} undoManager\n   */\n  constructor (undoManager) {\n    this.undoManager = undoManager\n  }\n\n  /**\n   * @param {any} origin\n   */\n  addTrackedOrigin (origin) {\n    this.undoManager.addTrackedOrigin(origin)\n  }\n\n  /**\n   * @param {any} origin\n   */\n  removeTrackedOrigin (origin) {\n    this.undoManager.removeTrackedOrigin(origin)\n  }\n\n  /**\n   * @return {boolean} Whether a change was undone.\n   */\n  undo () {\n    return this.undoManager.undo() != null\n  }\n\n  /**\n   * @return {boolean} Whether a change was redone.\n   */\n  redo () {\n    return this.undoManager.redo() != null\n  }\n}\n\n/**\n * @type {cmState.Facet<YUndoManagerConfig, YUndoManagerConfig>}\n */\nexport const yUndoManagerFacet = cmState.Facet.define({\n  combine (inputs) {\n    return inputs[inputs.length - 1]\n  }\n})\n\n/**\n * @type {cmState.AnnotationType<YUndoManagerConfig>}\n */\nexport const yUndoManagerAnnotation = cmState.Annotation.define()\n\n/**\n * @extends {PluginValue}\n */\nclass YUndoManagerPluginValue {\n  /**\n   * @param {cmView.EditorView} view\n   */\n  constructor (view) {\n    this.view = view\n    this.conf = view.state.facet(yUndoManagerFacet)\n    this._undoManager = this.conf.undoManager\n    this.syncConf = view.state.facet(ySyncFacet)\n    /**\n     * @type {null | YRange}\n     */\n    this._beforeChangeSelection = null\n    this._mux = createMutex()\n\n    this._onStackItemAdded = ({ stackItem, changedParentTypes }) => {\n      // only store metadata if this type was affected\n      if (changedParentTypes.has(this.syncConf.ytext) && this._beforeChangeSelection && !stackItem.meta.has(this)) { // do not overwrite previous stored selection\n        stackItem.meta.set(this, this._beforeChangeSelection)\n      }\n    }\n    this._onStackItemPopped = ({ stackItem }) => {\n      const sel = stackItem.meta.get(this)\n      if (sel) {\n        const selection = this.syncConf.fromYRange(sel)\n        view.dispatch(view.state.update({\n          selection,\n          effects: [cmView.EditorView.scrollIntoView(selection)]\n        }))\n        this._storeSelection()\n      }\n    }\n    /**\n     * Do this without mutex, simply use the sync annotation\n     */\n    this._storeSelection = () => {\n      // store the selection before the change is applied so we can restore it with the undo manager.\n      this._beforeChangeSelection = this.syncConf.toYRange(this.view.state.selection.main)\n    }\n    this._undoManager.on('stack-item-added', this._onStackItemAdded)\n    this._undoManager.on('stack-item-popped', this._onStackItemPopped)\n    this._undoManager.addTrackedOrigin(this.syncConf)\n  }\n\n  /**\n   * @param {cmView.ViewUpdate} update\n   */\n  update (update) {\n    if (update.selectionSet && (update.transactions.length === 0 || update.transactions[0].annotation(ySyncAnnotation) !== this.syncConf)) {\n      // This only works when YUndoManagerPlugin is included before the sync plugin\n      this._storeSelection()\n    }\n  }\n\n  destroy () {\n    this._undoManager.off('stack-item-added', this._onStackItemAdded)\n    this._undoManager.off('stack-item-popped', this._onStackItemPopped)\n    this._undoManager.removeTrackedOrigin(this.syncConf)\n  }\n}\nexport const yUndoManager = cmView.ViewPlugin.fromClass(YUndoManagerPluginValue)\n\n/**\n * @type {cmState.StateCommand}\n */\nexport const undo = ({ state, dispatch }) =>\n  state.facet(yUndoManagerFacet).undo() || true\n\n/**\n * @type {cmState.StateCommand}\n */\nexport const redo = ({ state, dispatch }) =>\n  state.facet(yUndoManagerFacet).redo() || true\n\n/**\n * @param {cmState.EditorState} state\n * @return {number}\n */\nexport const undoDepth = state => state.facet(yUndoManagerFacet).undoManager.undoStack.length\n\n/**\n * @param {cmState.EditorState} state\n * @return {number}\n */\nexport const redoDepth = state => state.facet(yUndoManagerFacet).undoManager.redoStack.length\n\n/**\n * Default key bindigs for the undo manager.\n * @type {Array<cmView.KeyBinding>}\n */\nexport const yUndoManagerKeymap = [\n  { key: 'Mod-z', run: undo, preventDefault: true },\n  { key: 'Mod-y', mac: 'Mod-Shift-z', run: redo, preventDefault: true },\n  { key: 'Mod-Shift-z', run: redo, preventDefault: true }\n]\n", "\nimport * as Y from 'yjs' // eslint-disable-line\nimport * as cmView from '@codemirror/view'\nimport * as cmState from '@codemirror/state' // eslint-disable-line\n\nimport { YRange } from './y-range.js'\nimport { ySync, ySyncFacet, YSyncConfig } from './y-sync.js'\nimport { yRemoteSelections, yRemoteSelectionsTheme } from './y-remote-selections.js'\nimport { yUndoManager, yUndoManagerFacet, YUndoManagerConfig, undo, redo, yUndoManagerKeymap } from './y-undomanager.js'\n\nexport { YRange, yRemoteSelections, yRemoteSelectionsTheme, ySync, ySyncFacet, YSyncConfig, yUndoManagerKeymap }\n\n/**\n * @param {Y.Text} ytext\n * @param {any} awareness\n * @param {Object} [opts]\n * @param {Y.UndoManager | false} [opts.undoManager] Set undoManager to false to disable the undo-redo plugin\n * @return {cmState.Extension}\n */\nexport const yCollab = (ytext, awareness, { undoManager = new Y.UndoManager(ytext) } = {}) => {\n  const ySyncConfig = new YSyncConfig(ytext, awareness)\n  const plugins = [\n    ySyncFacet.of(ySyncConfig),\n    ySync\n  ]\n  if (awareness) {\n    plugins.push(\n      yRemoteSelectionsTheme,\n      yRemoteSelections\n    )\n  }\n  if (undoManager !== false) {\n    // By default, only track changes that are produced by the sync plugin (local edits)\n    plugins.push(\n      yUndoManagerFacet.of(new YUndoManagerConfig(undoManager)),\n      yUndoManager,\n      cmView.EditorView.domEventHandlers({\n        beforeinput (e, view) {\n          if (e.inputType === 'historyUndo') return undo(view)\n          if (e.inputType === 'historyRedo') return redo(view)\n          return false\n        }\n      })\n    )\n  }\n  return plugins\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAMO,IAAM,SAAN,MAAM,QAAO;AAAA;AAAA;AAAA;AAAA;AAAA,EAKlB,YAAa,SAAS,OAAO;AAC3B,SAAK,UAAU;AACf,SAAK,QAAQ;AAAA,EACf;AAAA;AAAA;AAAA;AAAA,EAKA,SAAU;AACR,WAAO;AAAA,MACL,SAAW,uBAAuB,KAAK,OAAO;AAAA,MAC9C,OAAS,uBAAuB,KAAK,KAAK;AAAA,IAC5C;AAAA,EACF;AAAA;AAAA;AAAA;AAAA;AAAA,EAMA,OAAO,SAAU,MAAM;AACrB,WAAO,IAAI,QAAS,+BAA+B,KAAK,OAAO,GAAK,+BAA+B,KAAK,KAAK,CAAC;AAAA,EAChH;AACF;;;AC3BO,IAAM,cAAN,MAAkB;AAAA,EACvB,YAAa,OAAO,WAAW;AAC7B,SAAK,QAAQ;AACb,SAAK,YAAY;AACjB,SAAK,cAAc,IAAM,YAAY,KAAK;AAAA,EAC5C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EA6BA,OAAQ,KAAK,QAAQ,GAAG;AACtB,WAAS,oCAAoC,KAAK,OAAO,KAAK,KAAK;AAAA,EACrE;AAAA;AAAA;AAAA;AAAA,EAKA,SAAU,MAAM;AACd,UAAM,MAAQ,2CAA6C,+BAA+B,IAAI,GAAG,KAAK,MAAM,GAAG;AAC/G,QAAI,OAAO,QAAQ,IAAI,SAAS,KAAK,OAAO;AAC1C,YAAM,IAAI,MAAM,sFAAsF;AAAA,IACxG;AACA,WAAO;AAAA,MACL,KAAK,IAAI;AAAA,MACT,OAAO,IAAI;AAAA,IACb;AAAA,EACF;AAAA;AAAA;AAAA;AAAA;AAAA,EAMA,SAAU,OAAO;AACf,UAAM,QAAQ,MAAM;AACpB,UAAM,UAAU,KAAK,OAAO,MAAM,QAAQ,KAAK;AAC/C,UAAM,QAAQ,KAAK,OAAO,MAAM,MAAM,KAAK;AAC3C,WAAO,IAAI,OAAO,SAAS,KAAK;AAAA,EAClC;AAAA;AAAA;AAAA;AAAA,EAKA,WAAY,QAAQ;AAClB,UAAM,SAAS,KAAK,SAAS,OAAO,OAAO;AAC3C,UAAM,OAAO,KAAK,SAAS,OAAO,KAAK;AACvC,QAAI,OAAO,QAAQ,KAAK,KAAK;AAC3B,aAAe,gBAAgB,OAAO,KAAK,KAAK,KAAK,KAAK;AAAA,IAC5D;AACA,WAAe,gBAAgB,MAAM,OAAO,KAAK,KAAK,GAAG;AAAA,EAC3D;AACF;AAKO,IAAM,aAAqB,MAAM,OAAO;AAAA,EAC7C,QAAS,QAAQ;AACf,WAAO,OAAO,OAAO,SAAS,CAAC;AAAA,EACjC;AACF,CAAC;AAKM,IAAM,kBAA0B,WAAW,OAAO;AAKzD,IAAM,mBAAN,MAAuB;AAAA;AAAA;AAAA;AAAA,EAIrB,YAAa,MAAM;AACjB,SAAK,OAAO;AACZ,SAAK,OAAO,KAAK,MAAM,MAAM,UAAU;AACvC,SAAK,YAAY,CAAC,OAAO,OAAO;AAC9B,UAAI,GAAG,WAAW,KAAK,MAAM;AAC3B,cAAM,QAAQ,MAAM;AACpB,cAAM,UAAU,CAAC;AACjB,YAAI,MAAM;AACV,iBAAS,IAAI,GAAG,IAAI,MAAM,QAAQ,KAAK;AACrC,gBAAM,IAAI,MAAM,CAAC;AACjB,cAAI,EAAE,UAAU,MAAM;AACpB,oBAAQ,KAAK,EAAE,MAAM,KAAK,IAAI,KAAK,QAAQ,EAAE,OAAO,CAAC;AAAA,UACvD,WAAW,EAAE,UAAU,MAAM;AAC3B,oBAAQ,KAAK,EAAE,MAAM,KAAK,IAAI,MAAM,EAAE,QAAQ,QAAQ,GAAG,CAAC;AAC1D,mBAAO,EAAE;AAAA,UACX,OAAO;AACL,mBAAO,EAAE;AAAA,UACX;AAAA,QACF;AACA,aAAK,SAAS,EAAE,SAAS,aAAa,CAAC,gBAAgB,GAAG,KAAK,IAAI,CAAC,EAAE,CAAC;AAAA,MACzE;AAAA,IACF;AACA,SAAK,SAAS,KAAK,KAAK;AACxB,SAAK,OAAO,QAAQ,KAAK,SAAS;AAAA,EACpC;AAAA;AAAA;AAAA;AAAA,EAKA,OAAQ,QAAQ;AACd,QAAI,CAAC,OAAO,cAAe,OAAO,aAAa,SAAS,KAAK,OAAO,aAAa,CAAC,EAAE,WAAW,eAAe,MAAM,KAAK,MAAO;AAC9H;AAAA,IACF;AACA,UAAM,QAAQ,KAAK,KAAK;AACxB,UAAM,IAAI,SAAS,MAAM;AAIvB,UAAI,MAAM;AACV,aAAO,QAAQ,YAAY,CAAC,OAAO,KAAK,OAAO,KAAK,WAAW;AAC7D,cAAM,aAAa,OAAO,YAAY,GAAG,OAAO,QAAQ,IAAI;AAC5D,YAAI,UAAU,KAAK;AACjB,gBAAM,OAAO,QAAQ,KAAK,MAAM,KAAK;AAAA,QACvC;AACA,YAAI,WAAW,SAAS,GAAG;AACzB,gBAAM,OAAO,QAAQ,KAAK,UAAU;AAAA,QACtC;AACA,eAAO,WAAW,UAAU,MAAM;AAAA,MACpC,CAAC;AAAA,IACH,GAAG,KAAK,IAAI;AAAA,EACd;AAAA,EAEA,UAAW;AACT,SAAK,OAAO,UAAU,KAAK,SAAS;AAAA,EACtC;AACF;AAEO,IAAM,QAAe,WAAW,UAAU,gBAAgB;;;ACrJ1D,IAAM,yBAAgC,WAAW,UAAU;AAAA,EAChE,kBAAkB,CAClB;AAAA,EACA,sBAAsB;AAAA,IACpB,SAAS;AAAA,IACT,QAAQ;AAAA,EACV;AAAA,EACA,uBAAuB;AAAA,IACrB,UAAU;AAAA,IACV,YAAY;AAAA,IACZ,aAAa;AAAA,IACb,YAAY;AAAA,IACZ,aAAa;AAAA,IACb,WAAW;AAAA,IACX,SAAS;AAAA,EACX;AAAA,EACA,0BAA0B;AAAA,IACxB,cAAc;AAAA,IACd,UAAU;AAAA,IACV,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,KAAK;AAAA,IACL,MAAM;AAAA,IACN,iBAAiB;AAAA,IACjB,YAAY;AAAA,IACZ,WAAW;AAAA,EACb;AAAA,EACA,sDAAsD;AAAA,IACpD,iBAAiB;AAAA,IACjB,WAAW;AAAA,EACb;AAAA,EACA,sBAAsB;AAAA,IACpB,UAAU;AAAA,IACV,KAAK;AAAA,IACL,MAAM;AAAA,IACN,UAAU;AAAA,IACV,YAAY;AAAA,IACZ,WAAW;AAAA,IACX,YAAY;AAAA,IACZ,YAAY;AAAA,IACZ,YAAY;AAAA,IACZ,OAAO;AAAA,IACP,aAAa;AAAA,IACb,cAAc;AAAA,IACd,QAAQ;AAAA,IACR,YAAY;AAAA,IACZ,iBAAiB;AAAA;AAAA,IAEjB,SAAS;AAAA,IACT,iBAAiB;AAAA,IACjB,YAAY;AAAA,EACd;AAAA,EACA,kDAAkD;AAAA,IAChD,SAAS;AAAA,IACT,iBAAiB;AAAA,EACnB;AACF,CAAC;AAMD,IAAM,8BAAsC,WAAW,OAAO;AAE9D,IAAM,qBAAN,cAAwC,WAAW;AAAA;AAAA;AAAA;AAAA;AAAA,EAKjD,YAAa,OAAO,MAAM;AACxB,UAAM;AACN,SAAK,QAAQ;AACb,SAAK,OAAO;AAAA,EACd;AAAA,EAEA,QAAS;AACP;AAAA;AAAA,MAAuC,QAAQ,QAAQ,CAAM,OAAO,SAAS,oBAAoB,GAAQ,OAAO,SAAS,qBAAqB,KAAK,KAAK,mBAAmB,KAAK,KAAK,EAAE,CAAC,GAAG;AAAA,QACrL,KAAK,GAAQ;AAAA,QACb,QAAQ,OAAO;AAAA,UACZ,OAAO,SAAS,uBAAuB;AAAA,QAC9C,CAAC;AAAA,QACG,KAAK,GAAQ;AAAA,QACb,QAAQ,OAAO;AAAA,UACZ,OAAO,SAAS,mBAAmB;AAAA,QAC1C,GAAG;AAAA,UACG,KAAK,KAAK,IAAI;AAAA,QACpB,CAAC;AAAA,QACG,KAAK,GAAQ;AAAA,MACnB,CAAC;AAAA;AAAA,EACH;AAAA,EAEA,GAAI,QAAQ;AACV,WAAO,OAAO,UAAU,KAAK;AAAA,EAC/B;AAAA,EAEA,QAAS,QAAQ;AACf,WAAO,OAAO,UAAU,KAAK;AAAA,EAC/B;AAAA,EAEA,YAAa;AACX,WAAO;AAAA,EACT;AAAA,EAEA,IAAI,kBAAmB;AAAE,WAAO;AAAA,EAAG;AAAA,EAEnC,cAAe;AACb,WAAO;AAAA,EACT;AACF;AAEO,IAAM,+BAAN,MAAmC;AAAA;AAAA;AAAA;AAAA,EAIxC,YAAa,MAAM;AACjB,SAAK,OAAO,KAAK,MAAM,MAAM,UAAU;AACvC,SAAK,YAAY,CAAC,EAAE,OAAO,SAAS,QAAQ,GAAG,GAAG,MAAM;AACtD,YAAM,UAAU,MAAM,OAAO,OAAO,EAAE,OAAO,OAAO;AACpD,UAAI,QAAQ,UAAU,QAAM,OAAO,KAAK,KAAK,UAAU,IAAI,QAAQ,KAAK,GAAG;AACzE,aAAK,SAAS,EAAE,aAAa,CAAC,4BAA4B,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC;AAAA,MACrE;AAAA,IACF;AACA,SAAK,aAAa,KAAK,KAAK;AAC5B,SAAK,WAAW,GAAG,UAAU,KAAK,SAAS;AAI3C,SAAK,cAAsB,SAAS,GAAG,CAAC,CAAC;AAAA,EAC3C;AAAA,EAEA,UAAW;AACT,SAAK,WAAW,IAAI,UAAU,KAAK,SAAS;AAAA,EAC9C;AAAA;AAAA;AAAA;AAAA,EAKA,OAAQ,QAAQ;AACd,UAAM,QAAQ,KAAK,KAAK;AACxB,UAAM;AAAA;AAAA,MAA6B,MAAM;AAAA;AACzC,UAAM,YAAY,KAAK,KAAK;AAI5B,UAAM,cAAc,CAAC;AACrB,UAAM,sBAAsB,KAAK,KAAK,UAAU,cAAc;AAG9D,QAAI,uBAAuB,MAAM;AAC/B,YAAM,WAAW,OAAO,KAAK,YAAY,OAAO,KAAK,IAAI,cAAc,SAAS;AAChF,YAAM,MAAM,WAAW,OAAO,MAAM,UAAU,OAAO;AACrD,YAAM,gBAAgB,oBAAoB,UAAU,OAAO,OAAS,+BAA+B,oBAAoB,OAAO,MAAM;AACpI,YAAM,cAAc,oBAAoB,UAAU,OAAO,OAAS,+BAA+B,oBAAoB,OAAO,IAAI;AAEhI,UAAI,OAAO,MAAM;AACf,cAAM,SAAW,oCAAoC,OAAO,IAAI,MAAM;AACtE,cAAM,OAAS,oCAAoC,OAAO,IAAI,IAAI;AAClE,YAAI,oBAAoB,UAAU,QAAQ,CAAG,yBAAyB,eAAe,MAAM,KAAK,CAAG,yBAAyB,aAAa,IAAI,GAAG;AAC9I,oBAAU,mBAAmB,UAAU;AAAA,YACrC;AAAA,YACA;AAAA,UACF,CAAC;AAAA,QACH;AAAA,MACF,WAAW,oBAAoB,UAAU,QAAQ,UAAU;AACzD,kBAAU,mBAAmB,UAAU,IAAI;AAAA,MAC7C;AAAA,IACF;AAGA,cAAU,UAAU,EAAE,QAAQ,CAAC,OAAO,aAAa;AACjD,UAAI,aAAa,UAAU,IAAI,UAAU;AACvC;AAAA,MACF;AACA,YAAM,SAAS,MAAM;AACrB,UAAI,UAAU,QAAQ,OAAO,UAAU,QAAQ,OAAO,QAAQ,MAAM;AAClE;AAAA,MACF;AACA,YAAM,SAAW,2CAA2C,OAAO,QAAQ,IAAI;AAC/E,YAAM,OAAS,2CAA2C,OAAO,MAAM,IAAI;AAC3E,UAAI,UAAU,QAAQ,QAAQ,QAAQ,OAAO,SAAS,SAAS,KAAK,SAAS,OAAO;AAClF;AAAA,MACF;AACA,YAAM,EAAE,QAAQ,WAAW,OAAO,YAAY,IAAI,MAAM,QAAQ,CAAC;AACjE,YAAM,aAAc,MAAM,QAAQ,MAAM,KAAK,cAAe,QAAQ;AACpE,YAAM,QAAa,IAAI,OAAO,OAAO,KAAK,KAAK;AAC/C,YAAM,MAAW,IAAI,OAAO,OAAO,KAAK,KAAK;AAC7C,YAAM,YAAY,OAAO,KAAK,MAAM,IAAI,OAAO,KAAK;AACpD,YAAM,UAAU,OAAO,KAAK,MAAM,IAAI,OAAO,GAAG;AAChD,UAAI,UAAU,WAAW,QAAQ,QAAQ;AAEvC,oBAAY,KAAK;AAAA,UACf,MAAM;AAAA,UACN,IAAI;AAAA,UACJ,OAAc,WAAW,KAAK;AAAA,YAC5B,YAAY,EAAE,OAAO,qBAAqB,UAAU,GAAG;AAAA,YACvD,OAAO;AAAA,UACT,CAAC;AAAA,QACH,CAAC;AAAA,MACH,OAAO;AAGL,oBAAY,KAAK;AAAA,UACf,MAAM;AAAA,UACN,IAAI,UAAU,OAAO,UAAU;AAAA,UAC/B,OAAc,WAAW,KAAK;AAAA,YAC5B,YAAY,EAAE,OAAO,qBAAqB,UAAU,GAAG;AAAA,YACvD,OAAO;AAAA,UACT,CAAC;AAAA,QACH,CAAC;AAED,oBAAY,KAAK;AAAA,UACf,MAAM,QAAQ;AAAA,UACd,IAAI;AAAA,UACJ,OAAc,WAAW,KAAK;AAAA,YAC5B,YAAY,EAAE,OAAO,qBAAqB,UAAU,GAAG;AAAA,YACvD,OAAO;AAAA,UACT,CAAC;AAAA,QACH,CAAC;AACD,iBAAS,IAAI,UAAU,SAAS,GAAG,IAAI,QAAQ,QAAQ,KAAK;AAC1D,gBAAM,UAAU,OAAO,KAAK,MAAM,IAAI,KAAK,CAAC,EAAE;AAC9C,sBAAY,KAAK;AAAA,YACf,MAAM;AAAA,YACN,IAAI;AAAA,YACJ,OAAc,WAAW,KAAK;AAAA,cAC5B,YAAY,EAAE,OAAO,qBAAqB,UAAU,IAAI,OAAO,oBAAoB;AAAA,YACrF,CAAC;AAAA,UACH,CAAC;AAAA,QACH;AAAA,MACF;AACA,kBAAY,KAAK;AAAA,QACf,MAAM,KAAK;AAAA,QACX,IAAI,KAAK;AAAA,QACT,OAAc,WAAW,OAAO;AAAA,UAC9B,MAAM,KAAK,QAAQ,OAAO,QAAQ,IAAI,KAAK;AAAA;AAAA,UAC3C,OAAO;AAAA,UACP,QAAQ,IAAI,mBAAmB,OAAO,IAAI;AAAA,QAC5C,CAAC;AAAA,MACH,CAAC;AAAA,IACH,CAAC;AACD,SAAK,cAAqB,WAAW,IAAI,aAAa,IAAI;AAAA,EAC5D;AACF;AAEO,IAAM,oBAA2B,WAAW,UAAU,8BAA8B;AAAA,EACzF,aAAa,OAAK,EAAE;AACtB,CAAC;;;ACpOM,IAAM,cAAc,MAAM;AAC/B,MAAI,QAAQ;AACZ,SAAO,CAAC,GAAG,MAAM;AACf,QAAI,OAAO;AACT,cAAQ;AACR,UAAI;AACF,UAAE;AAAA,MACJ,UAAE;AACA,gBAAQ;AAAA,MACV;AAAA,IACF,WAAW,MAAM,QAAW;AAC1B,QAAE;AAAA,IACJ;AAAA,EACF;AACF;;;AClCO,IAAM,qBAAN,MAAyB;AAAA;AAAA;AAAA;AAAA,EAI9B,YAAa,aAAa;AACxB,SAAK,cAAc;AAAA,EACrB;AAAA;AAAA;AAAA;AAAA,EAKA,iBAAkB,QAAQ;AACxB,SAAK,YAAY,iBAAiB,MAAM;AAAA,EAC1C;AAAA;AAAA;AAAA;AAAA,EAKA,oBAAqB,QAAQ;AAC3B,SAAK,YAAY,oBAAoB,MAAM;AAAA,EAC7C;AAAA;AAAA;AAAA;AAAA,EAKA,OAAQ;AACN,WAAO,KAAK,YAAY,KAAK,KAAK;AAAA,EACpC;AAAA;AAAA;AAAA;AAAA,EAKA,OAAQ;AACN,WAAO,KAAK,YAAY,KAAK,KAAK;AAAA,EACpC;AACF;AAKO,IAAM,oBAA4B,MAAM,OAAO;AAAA,EACpD,QAAS,QAAQ;AACf,WAAO,OAAO,OAAO,SAAS,CAAC;AAAA,EACjC;AACF,CAAC;AAKM,IAAM,yBAAiC,WAAW,OAAO;AAKhE,IAAM,0BAAN,MAA8B;AAAA;AAAA;AAAA;AAAA,EAI5B,YAAa,MAAM;AACjB,SAAK,OAAO;AACZ,SAAK,OAAO,KAAK,MAAM,MAAM,iBAAiB;AAC9C,SAAK,eAAe,KAAK,KAAK;AAC9B,SAAK,WAAW,KAAK,MAAM,MAAM,UAAU;AAI3C,SAAK,yBAAyB;AAC9B,SAAK,OAAO,YAAY;AAExB,SAAK,oBAAoB,CAAC,EAAE,WAAW,mBAAmB,MAAM;AAE9D,UAAI,mBAAmB,IAAI,KAAK,SAAS,KAAK,KAAK,KAAK,0BAA0B,CAAC,UAAU,KAAK,IAAI,IAAI,GAAG;AAC3G,kBAAU,KAAK,IAAI,MAAM,KAAK,sBAAsB;AAAA,MACtD;AAAA,IACF;AACA,SAAK,qBAAqB,CAAC,EAAE,UAAU,MAAM;AAC3C,YAAM,MAAM,UAAU,KAAK,IAAI,IAAI;AACnC,UAAI,KAAK;AACP,cAAM,YAAY,KAAK,SAAS,WAAW,GAAG;AAC9C,aAAK,SAAS,KAAK,MAAM,OAAO;AAAA,UAC9B;AAAA,UACA,SAAS,CAAQ,WAAW,eAAe,SAAS,CAAC;AAAA,QACvD,CAAC,CAAC;AACF,aAAK,gBAAgB;AAAA,MACvB;AAAA,IACF;AAIA,SAAK,kBAAkB,MAAM;AAE3B,WAAK,yBAAyB,KAAK,SAAS,SAAS,KAAK,KAAK,MAAM,UAAU,IAAI;AAAA,IACrF;AACA,SAAK,aAAa,GAAG,oBAAoB,KAAK,iBAAiB;AAC/D,SAAK,aAAa,GAAG,qBAAqB,KAAK,kBAAkB;AACjE,SAAK,aAAa,iBAAiB,KAAK,QAAQ;AAAA,EAClD;AAAA;AAAA;AAAA;AAAA,EAKA,OAAQ,QAAQ;AACd,QAAI,OAAO,iBAAiB,OAAO,aAAa,WAAW,KAAK,OAAO,aAAa,CAAC,EAAE,WAAW,eAAe,MAAM,KAAK,WAAW;AAErI,WAAK,gBAAgB;AAAA,IACvB;AAAA,EACF;AAAA,EAEA,UAAW;AACT,SAAK,aAAa,IAAI,oBAAoB,KAAK,iBAAiB;AAChE,SAAK,aAAa,IAAI,qBAAqB,KAAK,kBAAkB;AAClE,SAAK,aAAa,oBAAoB,KAAK,QAAQ;AAAA,EACrD;AACF;AACO,IAAM,eAAsB,WAAW,UAAU,uBAAuB;AAKxE,IAAM,OAAO,CAAC,EAAE,OAAO,SAAS,MACrC,MAAM,MAAM,iBAAiB,EAAE,KAAK,KAAK;AAKpC,IAAM,OAAO,CAAC,EAAE,OAAO,SAAS,MACrC,MAAM,MAAM,iBAAiB,EAAE,KAAK,KAAK;AAkBpC,IAAM,qBAAqB;AAAA,EAChC,EAAE,KAAK,SAAS,KAAK,MAAM,gBAAgB,KAAK;AAAA,EAChD,EAAE,KAAK,SAAS,KAAK,eAAe,KAAK,MAAM,gBAAgB,KAAK;AAAA,EACpE,EAAE,KAAK,eAAe,KAAK,MAAM,gBAAgB,KAAK;AACxD;;;ACzIO,IAAM,UAAU,CAAC,OAAO,WAAW,EAAE,cAAc,IAAM,YAAY,KAAK,EAAE,IAAI,CAAC,MAAM;AAC5F,QAAM,cAAc,IAAI,YAAY,OAAO,SAAS;AACpD,QAAM,UAAU;AAAA,IACd,WAAW,GAAG,WAAW;AAAA,IACzB;AAAA,EACF;AACA,MAAI,WAAW;AACb,YAAQ;AAAA,MACN;AAAA,MACA;AAAA,IACF;AAAA,EACF;AACA,MAAI,gBAAgB,OAAO;AAEzB,YAAQ;AAAA,MACN,kBAAkB,GAAG,IAAI,mBAAmB,WAAW,CAAC;AAAA,MACxD;AAAA,MACO,WAAW,iBAAiB;AAAA,QACjC,YAAa,GAAG,MAAM;AACpB,cAAI,EAAE,cAAc,cAAe,QAAO,KAAK,IAAI;AACnD,cAAI,EAAE,cAAc,cAAe,QAAO,KAAK,IAAI;AACnD,iBAAO;AAAA,QACT;AAAA,MACF,CAAC;AAAA,IACH;AAAA,EACF;AACA,SAAO;AACT;",
  "names": []
}
